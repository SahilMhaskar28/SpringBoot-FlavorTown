<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Your Order History</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        body { background-color: #f4f7f9; }
        .order-container { background: #e6f2e6; padding: 30px; border-radius: 10px; }
    </style>
</head>
<body>
    <!-- Include header -->
    <div th:replace="Header :: header"></div>

    <div class="container mt-5 order-container">
        <h3 class="text-center mb-4">Your Order History</h3>
        
        <div th:if="${#lists.isEmpty(orderList)}" class="alert alert-info text-center">
            You have not placed any orders yet.
        </div>

        <table th:if="${not #lists.isEmpty(orderList)}" class="table table-striped table-bordered text-center align-middle">
            <thead class="table-success">
                <tr>
                    <th>Order Number</th>
                    <th>Order Date</th>
                    <th>Total Bill</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>        
                <tr th:each="o : ${orderList}">
                    <td th:text="${o.orderId}"></td>
                    <td th:text="${o.orderDate}"></td>
                    <td>â‚¹ <span th:text="${#numbers.formatDecimal(o.totalBill, 1, 2)}"></span></td>
                    <td th:text="${o.orderStatus}"></td>
                    <td th:if="${session.userRole == 'ADMIN'}">
                        <a th:href="@{/order/details/{id}(id=${o.orderId})}" class="btn btn-primary">Change Status</a>
                    </td> 
                    
                    <td th:if="${session.userRole == 'USER'}">
                        <a th:href="@{/order/details/{id}(id=${o.orderId})}" class="btn btn-primary">Details</a>
                    </td>    
                </tr>        
            </tbody>
        </table>
    </div>
    
    <!-- Include footer -->
    <div th:replace="Footer :: footer"></div>
</body>
</html>
